---
identifier: "CVE-2021-38191"
identifiers:
- "CVE-2021-38191"
- "GHSA-2grh-hm3w-w7hv"
package_slug: "cargo/tokio"
title: "Race condition in tokio"
description: "When aborting a task with JoinHandle::abort, the future is dropped in
  the thread calling abort if the task is not currently being executed. This is incorrect
  for tasks spawned on a LocalSet. This can easily result in race conditions as many
  projects use Rc or RefCell in their Tokio tasks for better performance."
date: "2023-06-13"
pubdate: "2021-08-25"
affected_range: ">=1.8.0 <1.8.1||>=1.7.0 <1.7.2||>=1.6.0 <1.6.3||>=0.3.0 <1.5.1"
fixed_versions:
- "1.8.1"
- "1.7.2"
- "1.6.3"
- "1.5.1"
affected_versions: "All versions starting from 0.3.0 before 1.5.1, all versions starting
  from 1.6.0 before 1.6.3, all versions starting from 1.7.0 before 1.7.2, all versions
  starting from 1.8.0 before 1.8.1"
not_impacted: "All versions before 0.3.0, all versions starting from 1.5.1 before
  1.6.0, all versions starting from 1.6.3 before 1.7.0, all versions starting from
  1.7.2 before 1.8.0, all versions starting from 1.8.1"
solution: "Upgrade to versions 1.5.1, 1.6.3, 1.7.2, 1.8.1 or above."
urls:
- "https://nvd.nist.gov/vuln/detail/CVE-2021-38191"
- "https://github.com/advisories/GHSA-2grh-hm3w-w7hv"
- "https://github.com/tokio-rs/tokio/issues/3929"
- "https://github.com/tokio-rs/tokio"
- "https://raw.githubusercontent.com/rustsec/advisory-db/main/crates/tokio/RUSTSEC-2021-0072.md"
- "https://rustsec.org/advisories/RUSTSEC-2021-0072.html"
cvss_v3: "CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:N/I:N/A:H"
uuid: "e7208df2-6c86-49e2-906c-47c89560c262"
cwe_ids:
- "CWE-362"
- "CWE-366"
- "CWE-937"
- "CWE-1035"
