---
identifier: "CVE-2021-45710"
identifiers:
- "CVE-2021-45710"
- "GHSA-fg7r-2g4j-5cgr"
package_slug: "cargo/tokio"
title: "Race Condition in tokio"
description: "If a tokio::sync::oneshot channel is closed (via the oneshot::Receiver::close
  method), a data race may occur if the oneshot::Sender::send method is called while
  the corresponding oneshot::Receiver is awaited or calling try_recv.\n\nWhen these
  methods are called concurrently on a closed channel, the two halves of the channel
  can concurrently access a shared memory location, resulting in a data race. This
  has been observed to cause memory corruption.\n\nNote that the race only occurs
  when both halves of the channel are used after the Receiver half has called close.
  Code where close is not used, or where the Receiver is not awaited and try_recv
  is not called after calling close, is not affected."
date: "2023-06-13"
pubdate: "2022-01-06"
affected_range: ">=0.1.14 <1.8.4||>=1.9.0 <1.13.1"
fixed_versions:
- "1.8.4"
- "1.13.1"
affected_versions: "All versions starting from 0.1.14 before 1.8.4, all versions starting
  from 1.9.0 before 1.13.1"
not_impacted: "All versions before 0.1.14, all versions starting from 1.8.4 before
  1.9.0, all versions starting from 1.13.1"
solution: "Upgrade to versions 1.13.1, 1.8.4 or above."
urls:
- "https://nvd.nist.gov/vuln/detail/CVE-2021-45710"
- "https://github.com/advisories/GHSA-fg7r-2g4j-5cgr"
- "https://github.com/tokio-rs/tokio/issues/4225"
- "https://github.com/tokio-rs/tokio"
- "https://raw.githubusercontent.com/rustsec/advisory-db/main/crates/tokio/RUSTSEC-2021-0124.md"
- "https://rustsec.org/advisories/RUSTSEC-2021-0124.html"
cvss_v3: "CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H"
uuid: "774c2958-50a3-4911-82fe-fc560be265b3"
cwe_ids:
- "CWE-362"
- "CWE-937"
- "CWE-1035"
