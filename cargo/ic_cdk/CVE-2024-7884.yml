---
identifier: "CVE-2024-7884"
identifiers:
- "CVE-2024-7884"
- "GHSA-rwq6-crjg-9cpw"
package_slug: "cargo/ic_cdk"
title: "ic-cdk has a memory leak when calling a canister method via `ic_cdk::call`"
description: "When a canister method is called via `ic_cdk::call*`, a new Future `CallFuture`
  is created  and can be awaited by the caller to get the execution result. Internally,
  the state of the Future is tracked and stored in a struct called `CallFutureState`.
  \ A bug in the polling implementation of the `CallFuture` allows multiple references
  to be held for this internal state and not all references were dropped before the
  `Future` is resolved. Since we have unaccounted references held, a copy of the internal
  state ended up being persisted in the canister's heap and thus causing a memory
  leak."
date: "2024-09-05"
pubdate: "2024-09-05"
affected_range: ">=0.8.0 <0.8.2||>=0.9.0 <0.9.3||>=0.10.0 <0.10.1||>=0.11.0 <0.11.6||>=0.12.0
  <0.12.2||>=0.13.0 <0.13.5||>=0.14.0 <0.14.1||>=0.15.0 <0.15.1"
fixed_versions:
- "0.8.2"
- "0.9.3"
- "0.10.1"
- "0.11.6"
- "0.12.2"
- "0.13.5"
- "0.14.1"
- "0.15.1"
affected_versions: "All versions starting from 0.8.0 before 0.8.2, all versions starting
  from 0.9.0 before 0.9.3, all versions starting from 0.10.0 before 0.10.1, all versions
  starting from 0.11.0 before 0.11.6, all versions starting from 0.12.0 before 0.12.2,
  all versions starting from 0.13.0 before 0.13.5, all versions starting from 0.14.0
  before 0.14.1, all versions starting from 0.15.0 before 0.15.1"
not_impacted: "All versions before 0.8.0, all versions starting from 0.8.2 before
  0.9.0, all versions starting from 0.9.3 before 0.10.0, all versions starting from
  0.10.1 before 0.11.0, all versions starting from 0.11.6 before 0.12.0, all versions
  starting from 0.12.2 before 0.13.0, all versions starting from 0.13.5 before 0.14.0,
  all versions starting from 0.14.1 before 0.15.0, all versions starting from 0.15.1"
solution: "Upgrade to versions 0.10.1, 0.11.6, 0.12.2, 0.13.5, 0.14.1, 0.15.1, 0.8.2,
  0.9.3 or above."
urls:
- "https://nvd.nist.gov/vuln/detail/CVE-2024-7884"
- "https://github.com/advisories/GHSA-rwq6-crjg-9cpw"
- "https://github.com/dfinity/cdk-rs/security/advisories/GHSA-rwq6-crjg-9cpw"
- "https://github.com/dfinity/cdk-rs/pull/509"
- "https://docs.rs/ic-cdk/latest/ic_cdk"
- "https://github.com/dfinity/cdk-rs"
- "https://internetcomputer.org/docs/current/references/ic-interface-spec"
cvss_v3: "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H"
uuid: "063f46bf-e909-43b1-9987-0755bca5d4db"
cwe_ids:
- "CWE-401"
- "CWE-937"
- "CWE-1035"
