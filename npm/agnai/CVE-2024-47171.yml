---
identifier: "CVE-2024-47171"
identifiers:
- "CVE-2024-47171"
- "GHSA-g54f-66mw-hv66"
package_slug: "npm/agnai"
title: "Agnai vulnerable to Relative Path Traversal in Image Upload"
description: "A vulnerability has been discovered in **Agnai** that permits attackers
  to upload image files at attacker-chosen location on the server. This issue can
  lead to image file uploads to unauthorized or unintended directories, including
  overwriting of existing images which may be used for defacement.\n\nThis does not
  affect:\n\n- agnai.chat\n- installations using S3-compatible storage\n- self-hosting
  that is not publicly exposed"
date: "2024-09-26"
pubdate: "2024-09-26"
affected_range: "<1.0.330"
fixed_versions:
- "1.0.330"
affected_versions: "All versions before 1.0.330"
not_impacted: "All versions starting from 1.0.330"
solution: "Upgrade to version 1.0.330 or above."
urls:
- "https://nvd.nist.gov/vuln/detail/CVE-2024-47171"
- "https://github.com/advisories/GHSA-g54f-66mw-hv66"
- "https://github.com/agnaistic/agnai/security/advisories/GHSA-g54f-66mw-hv66"
- "https://github.com/agnaistic/agnai"
- "https://github.com/agnaistic/agnai/blob/75abbd5b0f5e48ddecc805365cf1574d05ee1ce5/srv/api/character.ts#L140:"
- "https://github.com/agnaistic/agnai/blob/75abbd5b0f5e48ddecc805365cf1574d05ee1ce5/srv/api/upload.ts#L55"
cvss_v3: "CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N"
uuid: "e535a476-bf2d-4712-ba7c-b4d370da398e"
cwe_ids:
- "CWE-22"
- "CWE-35"
- "CWE-937"
- "CWE-1035"
