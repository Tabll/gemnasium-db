---
identifier: "CVE-2021-37690"
identifiers:
- "CVE-2021-37690"
- "GHSA-3hxh-8cp2-g4hg"
package_slug: "pypi/tensorflow-gpu"
title: "Use after free and segfault in shape inference functions"
description: "When running shape functions, some functions (such as `MutableHashTableShape`)
  produce extra output information in the form of a `ShapeAndType` struct. The shapes
  embedded in this struct are owned by an inference context that is cleaned up almost
  immediately; if the upstream code attempts to access this shape information, it
  can trigger a segfault.\n\n`ShapeRefiner` is mitigating this for normal output shapes
  by cloning them (and thus putting the newly created shape under ownership of an
  inference context that will not die), but we were not doing the same for shapes
  and types. This commit fixes that by doing similar logic on output shapes and types."
date: "2024-11-13"
pubdate: "2021-08-25"
affected_range: "<2.3.4||>=2.4.0,<2.4.3||>=2.5.0,<2.5.1||==2.5.0"
fixed_versions:
- "2.3.4"
- "2.4.3"
- "2.5.1"
affected_versions: "All versions before 2.3.4, all versions starting from 2.4.0 before
  2.4.3, all versions starting from 2.5.0 before 2.5.1, version 2.5.0"
not_impacted: ""
solution: "Upgrade to versions 2.3.4, 2.4.3, 2.5.1 or above."
urls:
- "https://nvd.nist.gov/vuln/detail/CVE-2021-37690"
- "https://github.com/advisories/GHSA-3hxh-8cp2-g4hg"
- "https://github.com/tensorflow/tensorflow/security/advisories/GHSA-3hxh-8cp2-g4hg"
- "https://github.com/tensorflow/tensorflow/commit/ee119d4a498979525046fba1c3dd3f13a039fbb1"
- "https://github.com/pypa/advisory-database/tree/main/vulns/tensorflow-cpu/PYSEC-2021-603.yaml"
- "https://github.com/pypa/advisory-database/tree/main/vulns/tensorflow-gpu/PYSEC-2021-801.yaml"
- "https://github.com/pypa/advisory-database/tree/main/vulns/tensorflow/PYSEC-2021-312.yaml"
- "https://github.com/tensorflow/tensorflow"
cvss_v2: "AV:L/AC:L/Au:N/C:P/I:P/A:P"
cvss_v3: "CVSS:3.1/AV:L/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:H"
uuid: "3b916fb4-f9d4-422a-8ea8-944bc39215f7"
cwe_ids:
- "CWE-416"
- "CWE-937"
- "CWE-1035"
